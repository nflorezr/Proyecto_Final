#include<stdio.h>
	int i,j,sum,posicion,acu=0,win=0;
	char Jugador1='X';
	char matriz[3][3];
	
void FILL()
{
	
	//en esta funcion el objetivo es llenar la matriz que se volvera el plano para jugar, la matriz sera llenada por los numeros que representaran los botones en el teclado//
		sum=1;
		for (i=2;i>=0;i--)
		{	
			for (j=0;j<=2;j++)
			{
				matriz[i][j]=sum;
				sum++;
			}
		}
		for (i=0;i<=2;i++)
		{	
		for (j=0;j<=2;j++)
		{
			printf("%d  ",matriz[i][j]);
		}
	printf("\n\n");
		}
}
void input()
{
	printf("ingresa la posicion que deseas poner una %c!\n\n",Jugador1);
	scanf("%d",&posicion);
	
	
	while (posicion>9 or posicion<1)
	{
		printf("la posicion debe de estar entre 1 y 9");
		scanf("%d",&posicion);
	}
}

void trick()
{
// en esta funcion el objetivo es buscar si la posicion esta tomada y poner la X y el O respectivamente, se compara si la posicion es = al numero original puesta en la funcion FILL//
//si no es igual, entonces la posicion esta tomada//

 win=0;
	if (posicion==1 and matriz[2][0]==1)
		matriz[2][0]=Jugador1;	
	else if (posicion==2 and matriz[2][1]==2)
		matriz[2][1]=Jugador1;
	else if (posicion==3 and matriz[2][2]==3)
		matriz[2][2]=Jugador1;
	else if (posicion==4 and matriz[1][0]==4)
		matriz[1][0]=Jugador1;
	else if (posicion==5 and matriz[1][1]==5)
		matriz[1][1]=Jugador1;
	else if (posicion==6 and matriz[1][2]==6)
		matriz[1][2]=Jugador1;
	else if (posicion==7 and matriz[0][0]==7)
		matriz[0][0]=Jugador1;
	else if (posicion==8 and matriz[0][1]==8)
		matriz[0][1]=Jugador1;
	else if (posicion==9 and matriz[0][2]==9)
		matriz[0][2]=Jugador1;
	else
	{
		printf("\nla posicion ya esta tomada\n");
		win=2;
	}
	
}
void graph()
{
	
	//esta funcion tiene como una funcionalidad mostrar la matriz despues de cada jugada//
printf("\n");
	for (i=0;i<=2;i++)
{ printf("                   ");
	for (j=0;j<=2;j++)
	{   
	if (j==2)
	
	{
		if (matriz[i][j]==1 or matriz[i][j]==2 or matriz[i][j]==3 or matriz[i][j]==4 or matriz[i][j]==5 or matriz[i][j]==6 or matriz[i][j]==7 or matriz[i][j]==8 or matriz[i][j]==9)
		printf("%d  ",matriz[i][j]);
		else
		printf("%c  ",matriz[i][j]);
	}
	else
	{
			if (matriz[i][j]==1 or matriz[i][j]==2 or matriz[i][j]==3 or matriz[i][j]==4 or matriz[i][j]==5 or matriz[i][j]==6 or matriz[i][j]==7 or matriz[i][j]==8 or matriz[i][j]==9)
		printf("%d | ",matriz[i][j]);
		else
		printf("%c | ",matriz[i][j]);
		
	}
	
	}
	if (i!=2)
	printf("\n                   ----------\n");
	else
	printf("\n");
}
printf("\n\n");
}
void Cambio()
{
	
	//esta funcion cambia de jugador despues de que se haya hecho una jugada//
	if (Jugador1=='X')
	Jugador1='O';
	else
	Jugador1='X';
}
void WIN()

//esta funcion esta diseÃ±ada para detectar cuando un jugador a ganado o cuando los jugadores han empatado//
{ //Horizontales 
	if (matriz[0][0]==matriz[0][1] and matriz[0][0]==matriz[0][2])
	{
		printf("El jugador de la %c es el ganador!",Jugador1) ;
		win=1;
	}
	//se detecta cuando 3 puntos son iguales, en caso de que sean iguales (mismo simbolo) entonces ese jugador sera marcado como el ganador transformando la variable win y enviandolo al main//
	
	if (matriz[1][0]==matriz[1][1] and matriz[1][0]==matriz[1][2])
	{
		printf("El jugador de la %c es el ganador!",Jugador1) ;
		win=1;
	}
	
	if (matriz[2][0]==matriz[2][1] and matriz[2][0]==matriz[2][2])
	{
		printf("El jugador de la %c es el ganador!",Jugador1) ;
		win=1;
	}
// ahora verticales
    if (matriz[0][0]==matriz[1][0] and matriz[0][0]==matriz[2][0])
	{
		printf("El jugador de la %c es el ganador!",Jugador1) ;
		win=1;
	}
	
	if (matriz[0][1]==matriz[1][1] and matriz[0][1]==matriz[2][1])
	{
		printf("El jugador de la %c es el ganador!",Jugador1) ;
		win=1;
	}
	
	if (matriz[0][2]==matriz[1][2] and matriz[0][2]==matriz[2][2])
	{
		printf("El jugador de la %c es el ganador!",Jugador1) ;
		win=1;
	}
//ahora Diagonales
	if (matriz[0][0]==matriz[1][1] and matriz[0][0]==matriz[2][2])
	{
		printf("El jugador de la %c es el ganador!",Jugador1) ;
		win=1;
	}
	
	if (matriz[0][2]==matriz[1][1] and matriz[0][2]==matriz[2][0])
	{
		printf("El jugador de la %c es el ganador!",Jugador1) ;
		win=1;
	}
}
void TIE()
{
	//esta funcion decide cuando el juego a terminado en empate//
	
	//en cada ronda , el juego mirara cuantas X o O estan en el campo, si el numero es 8 entonces el juego acaba//
	for (i=0;i<=2;i++)
{
	for(j=0;j<=2;j++)
	{
		if (matriz[i][j]=='X' or matriz[i][j]=='O')
		acu++;
	}
}
 //si el juego no ha terminado despues de 8 rondas entonces nadie podra ganar, esto se detecta con un acumulador que aumentara despues de cada ronda, si acu llega a 8 , el juego termina//
if (acu==8)
{
printf("Empate!");
win=1;
}
else 
acu=0;
}


int main()
{	
printf("a escogido tick tack toe!\n\n");
FILL();
// se utiliza 1 while para hacer que el juego continue hasta que haya un break, es decir, alguien gane o ambos empaten//
while (1)
{

input();
trick();
//este while es utilizado para los casos en que un jugador intente poner su simbolo en una posicion que ya ha sido tomada, el while provocara un repetimiento infinito de esa iteracion //
//en esta caso se reutilizo la variable win de nuevo, mientras win valga 2 entonces se seguira repitiendo hasta que cambie de posicion//
	while (win==2)
	{	graph();
		input();
		trick();		
	}
graph();
WIN();

//una vez que el win es transformado, el programa lo mirara y dira si alguien gano o no, en caso que win no sea transformado, el pograma continuara hasta que alguien gane o empate//
	if (win==1)
	{
		break;
	}
	
TIE();

	if (win==1)
	{
		break;
	}
Cambio();
}	
}
